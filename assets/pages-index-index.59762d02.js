import{r as e,o as t,c as s,w as a,a as i,n as l,b as r,d as n,e as o,f as c,i as u,u as d,g as p,h as m,j as h,k as _,l as f,m as y,p as w,q as g,s as v,F as b,t as k,v as E,x as I,S as j,y as A,z as D,A as S}from"./index-4598f6c2.js";import{_ as T,a as C}from"./playerBar.0129141f.js";import{_ as U}from"./uni-icons.5b1b469c.js";import{_ as x}from"./uni-search-bar.b6dc4363.js";import{_ as L,u as B}from"./music.f3ee86ef.js";import{_ as M}from"./plugin-vueexport-helper.1b428a4d.js";import{_ as O}from"./uni-section.6bda0fba.js";import{_ as R}from"./mIcon.784f47e7.js";import"./playlistCard.857d6450.js";const F=M({name:"UniDrawer",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted(){const e={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(t=>{if(this.disable)return;const s=Object.keys(e).find((s=>{const a=t.key,i=e[s];return i===a||Array.isArray(i)&&i.includes(a)}));s&&setTimeout((()=>{this.$emit(s,{})}),0)}))},render:()=>{}}},emits:["change"],props:{mode:{type:String,default:""},mask:{type:Boolean,default:!0},maskClick:{type:Boolean,default:!0},width:{type:Number,default:220}},data:()=>({visibleSync:!1,showDrawer:!1,rightMode:!1,watchTimer:null,drawerWidth:220}),created(){this.drawerWidth=this.width,this.rightMode="right"===this.mode},methods:{clear(){},close(e){("mask"!==e||this.maskClick)&&this.visibleSync&&this._change("showDrawer","visibleSync",!1)},open(){this.visibleSync||this._change("visibleSync","showDrawer",!0)},_change(e,t,s){this[e]=s,this.watchTimer&&clearTimeout(this.watchTimer),this.watchTimer=setTimeout((()=>{this[t]=s,this.$emit("change",s)}),s?50:300)}}},[["render",function(d,p,m,h,_,f){const y=u,w=e("keypress");return _.visibleSync?(t(),s(y,{key:0,class:l([{"uni-drawer--visible":_.showDrawer},"uni-drawer"]),onTouchmove:o(f.clear,["stop","prevent"])},{default:a((()=>[i(y,{class:l(["uni-drawer__mask",{"uni-drawer__mask--visible":_.showDrawer&&m.mask}]),onClick:p[0]||(p[0]=e=>f.close("mask"))},null,8,["class"]),i(y,{class:l(["uni-drawer__content",{"uni-drawer--right":_.rightMode,"uni-drawer--left":!_.rightMode,"uni-drawer__content--visible":_.showDrawer}]),style:r({width:_.drawerWidth+"px"})},{default:a((()=>[n(d.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),i(w,{onEsc:p[1]||(p[1]=e=>f.close("mask"))})])),_:3},8,["class","onTouchmove"])):c("",!0)}],["__scopeId","data-v-99368944"]]),G=M({__name:"userDeawer",props:["visible"],emits:["update:visible"],setup(e,{emit:l}){const r=e,n=d(),o=p(null);m((()=>{var e,t;r.visible?null==(e=o.value)||e.open():null==(t=o.value)||t.close()}));const c=e=>{e||l("update:visible",!1)};return(e,l)=>{const r=h(_("uni-list-chat"),T),d=h(_("uni-list"),L),p=u,m=w,v=g,b=h(_("uni-drawer"),F);return t(),s(b,{ref_key:"userDrawer",ref:o,mode:"left",width:320,onChange:c},{default:a((()=>[f(n).profile?(t(),s(p,{key:0},{default:a((()=>[i(d,{border:!0},{default:a((()=>[i(r,{"avatar-circle":!0,title:f(n).profile.nickname,avatar:f(n).profile.avatarUrl},null,8,["title","avatar"])])),_:1})])),_:1})):(t(),s(v,{key:1,url:"/pages/login/login"},{default:a((()=>[i(m,{type:"primary",size:"mini"},{default:a((()=>[y("去登录")])),_:1})])),_:1}))])),_:1},512)}}},[["__scopeId","data-v-d372bea2"]]),z=M({__name:"Header",setup(e){const s=p(!1),l=()=>{k({url:"/pages/search/search"})};return(e,r)=>{const n=h(_("uni-icons"),U),o=h(_("uni-search-bar"),x),c=u,d=h(_("userDeawer"),G);return t(),v(b,null,[i(c,{class:"header"},{default:a((()=>[i(n,{class:"bars",color:"#5e6d82",type:"bars",size:"30",onClick:r[0]||(r[0]=e=>s.value=!0)}),i(c,{class:"search",onClick:l},{default:a((()=>[i(o,{placeholder:"搜索",bgColor:"#EEEEEE",readonly:""})])),_:1})])),_:1}),i(d,{visible:s.value,"onUpdate:visible":r[1]||(r[1]=e=>s.value=e)},null,8,["visible"])],64)}}},[["__scopeId","data-v-123e4ebd"]]),N=M({__name:"Banner",props:["banners"],setup:e=>(l,r)=>{const n=I,o=j,c=A,d=u;return t(),s(d,{class:"swiper-wrap"},{default:a((()=>[i(c,{class:"swiper","indicator-dots":"","indicator-color":"rgba(255, 255, 255, .4)","indicator-active-color":"#ffffff",autoplay:"",circular:""},{default:a((()=>[(t(!0),v(b,null,E(e.banners,(e=>(t(),s(o,{key:e.targetId},{default:a((()=>[i(n,{src:e.pic,mode:"widthFix"},null,8,["src"])])),_:2},1024)))),128))])),_:1})])),_:1})}},[["__scopeId","data-v-1c124446"]]),H=M({__name:"Ball",setup(e){const l=[{id:-1,name:"每日推荐",iconUrl:"http://p1.music.126.net/4DpSgAVpJny4Ewf-Xw_WQQ==/109951163986641971.jpg",url:"/pages/recommend/recommend"},{id:-6,name:"私人FM",iconUrl:"http://p1.music.126.net/Shi7cRT1bDhwpVDM7AOFXg==/109951165265330616.jpg",url:"/pages/personalfm/personalfm"},{id:-2,name:"歌单",iconUrl:"http://p1.music.126.net/uG5p6CnwAHrLqOkaSeRlnA==/109951163986649164.jpg",url:""},{id:-3,name:"排行榜",iconUrl:"http://p1.music.126.net/SDFC6A3X2wzUCavYyeGIOg==/109951163986649670.jpg",url:"/pages/toplist/toplist"},{id:1025001,name:"有声书",iconUrl:"http://p1.music.126.net/Kb4oK0m_ocs3FR3lo-r9yg==/109951167319110429.jpg",url:""},{id:13e3,name:"数字专辑",iconUrl:"http://p1.music.126.net/nRWhsf3P7r7eqHz-v61VBg==/109951166989045593.jpg",url:""},{id:11e3,name:"直播",iconUrl:"http://p1.music.126.net/2JvVZZjcjyCE72fGMsC1hg==/109951166989043011.jpg",url:""},{id:1025e3,name:"关注新歌",iconUrl:"http://p1.music.126.net/BAOWsqZmmxL8JIH-wejMmQ==/109951167294312390.jpg",url:""},{id:1027e3,name:"收藏家",iconUrl:"http://p1.music.126.net/gk99UFRasebERf38t6A1kA==/109951168168319514.jpg",url:""}];return(e,r)=>{const n=I,o=u,c=j,d=A;return t(),s(d,{class:"icon-swiper","display-multiple-items":"5"},{default:a((()=>[(t(),v(b,null,E(l,(e=>i(c,{key:e.id},{default:a((()=>[i(n,{src:e.iconUrl,mode:"widthFix",onClick:t=>{var s;(s=e.url)&&k({url:s})}},null,8,["src","onClick"]),i(o,{class:"icon-name"},{default:a((()=>[y(D(e.name),1)])),_:2},1024)])),_:2},1024))),64))])),_:1})}}},[["__scopeId","data-v-d232f0d5"]]),W=M({__name:"Playlist",props:["list","title"],setup:e=>(l,r)=>{const n=I,o=u,c=h(_("uni-section"),O);return t(),s(c,{type:"line",title:e.title},{default:a((()=>[i(o,{class:"playlist"},{default:a((()=>[(t(!0),v(b,null,E(e.list,(e=>(t(),s(o,{class:"playlist-item",key:e.creativeId,onClick:t=>{return s=e.creativeId,void k({url:`/pages/songlist/songlist?id=${s}`});var s}},{default:a((()=>{var t;return[i(n,{src:null==(t=e.uiElement.image)?void 0:t.imageUrl,mode:"widthFix"},null,8,["src"]),i(o,{class:"playlist-item-name"},{default:a((()=>[y(D(e.uiElement.mainTitle.title),1)])),_:2},1024)]})),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["title"])}},[["__scopeId","data-v-c6bed9e2"]]),P=M({__name:"Songs",props:["list","title","ids"],setup(e){const l=e,r=B(),n=e=>r.curSongDetail.id===Number(e)?{type:"bofangzhong",color:"#c84341"}:{type:"bofang"};return(o,c)=>{const u=h(_("mIcon"),R),d=h(_("uni-list-chat"),T),p=h(_("uni-list"),L),m=j,f=A,y=h(_("uni-section"),O);return t(),s(y,{type:"line",title:e.title},{default:a((()=>[i(f,{class:"song-swiper","next-margin":"80rpx"},{default:a((()=>[(t(!0),v(b,null,E(e.list,((e,o)=>(t(),s(m,{key:o},{default:a((()=>[i(p,{border:!1},{default:a((()=>[(t(!0),v(b,null,E(e.resources,(e=>{return t(),s(d,{key:e.resourceId,title:e.uiElement.mainTitle.title,note:(o=e.resourceExtInfo.artists,o.map((e=>e.name)).join("/")),avatar:e.uiElement.image.imageUrl,clickable:"",ellipsis:"1",onClick:t=>(async e=>{const t=l.ids.indexOf(e);await r.playAllSongs(l.ids),r.currentIndex=t})(e.resourceId)},{default:a((()=>[i(u,{size:24,type:n(e.resourceId).type,color:n(e.resourceId).color},null,8,["type","color"])])),_:2},1032,["title","note","avatar","onClick"]);var o})),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["title"])}}},[["__scopeId","data-v-32f8f364"]]),q={__name:"index",setup(e){d();const l=p([]);return S().then((e=>{console.log(e.data.blocks),l.value=e.data.blocks})),(e,r)=>{const n=u,o=h(_("playerBar"),C);return t(),s(o,null,{default:a((()=>[i(f(z)),(t(!0),v(b,null,E(l.value,((e,i)=>(t(),s(n,{class:"block"},{default:a((()=>["BANNER"===e.showType?(t(),s(f(N),{key:0,banners:e.extInfo.banners},null,8,["banners"])):"DRAGON_BALL"===e.showType?(t(),s(f(H),{key:1})):"HOMEPAGE_SLIDE_PLAYLIST"===e.showType?(t(),s(f(W),{key:2,title:e.uiElement.subTitle.title,list:e.creatives},null,8,["title","list"])):"HOMEPAGE_SLIDE_SONGLIST_ALIGN"===e.showType?(t(),s(f(P),{key:3,title:e.uiElement.subTitle.title,list:e.creatives,ids:e.resourceIdList},null,8,["title","list","ids"])):c("",!0)])),_:2},1024)))),256))])),_:1})}}};export{q as default};
