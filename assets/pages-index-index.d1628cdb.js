import{r as e,o as a,c as s,w as t,a as i,n as r,b as l,d as n,e as o,f as c,i as u,u as d,g as p,h as m,j as h,k as f,l as w,m as _,p as g,q as v,s as y,t as b,v as k,x as j,F as U,y as D,S as C,z as A,A as E,B as S}from"./index-e7db9b22.js";import{_ as T}from"./uni-icons.4030ad57.js";import{_ as x}from"./uni-search-bar.666a18e8.js";import{_ as B}from"./uni-section.a94d7f80.js";import{_ as F,a as I}from"./playerBar.f37c8f01.js";import{_ as M}from"./music.e5b57345.js";import{_ as R}from"./plugin-vueexport-helper.1b428a4d.js";import"./mIcon.1e6c1b8c.js";import"./playlistCard.f8ac2a0f.js";const W=R({name:"UniDrawer",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted(){const e={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(a=>{if(this.disable)return;const s=Object.keys(e).find((s=>{const t=a.key,i=e[s];return i===t||Array.isArray(i)&&i.includes(t)}));s&&setTimeout((()=>{this.$emit(s,{})}),0)}))},render:()=>{}}},emits:["change"],props:{mode:{type:String,default:""},mask:{type:Boolean,default:!0},maskClick:{type:Boolean,default:!0},width:{type:Number,default:220}},data:()=>({visibleSync:!1,showDrawer:!1,rightMode:!1,watchTimer:null,drawerWidth:220}),created(){this.drawerWidth=this.width,this.rightMode="right"===this.mode},methods:{clear(){},close(e){("mask"!==e||this.maskClick)&&this.visibleSync&&this._change("showDrawer","visibleSync",!1)},open(){this.visibleSync||this._change("visibleSync","showDrawer",!0)},_change(e,a,s){this[e]=s,this.watchTimer&&clearTimeout(this.watchTimer),this.watchTimer=setTimeout((()=>{this[a]=s,this.$emit("change",s)}),s?50:300)}}},[["render",function(d,p,m,h,f,w){const _=u,g=e("keypress");return f.visibleSync?(a(),s(_,{key:0,class:r([{"uni-drawer--visible":f.showDrawer},"uni-drawer"]),onTouchmove:o(w.clear,["stop","prevent"])},{default:t((()=>[i(_,{class:r(["uni-drawer__mask",{"uni-drawer__mask--visible":f.showDrawer&&m.mask}]),onClick:p[0]||(p[0]=e=>w.close("mask"))},null,8,["class"]),i(_,{class:r(["uni-drawer__content",{"uni-drawer--right":f.rightMode,"uni-drawer--left":!f.rightMode,"uni-drawer__content--visible":f.showDrawer}]),style:l({width:f.drawerWidth+"px"})},{default:t((()=>[n(d.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),i(g,{onEsc:p[1]||(p[1]=e=>w.close("mask"))})])),_:3},8,["class","onTouchmove"])):c("",!0)}],["__scopeId","data-v-99368944"]]),z=R({__name:"userDeawer",props:["visible"],emits:["update:visible"],setup(e,{emit:r}){const l=e,n=d(),o=p(null);m((()=>{var e,a;l.visible?null==(e=o.value)||e.open():null==(a=o.value)||a.close()}));const c=e=>{e||r("update:visible",!1)};return(e,r)=>{const l=h(f("uni-list-chat"),F),d=h(f("uni-list"),M),p=u,m=g,y=v,b=h(f("uni-drawer"),W);return a(),s(b,{ref_key:"userDrawer",ref:o,mode:"left",width:320,onChange:c},{default:t((()=>[w(n).profile?(a(),s(p,{key:0},{default:t((()=>[i(d,{border:!0},{default:t((()=>[i(l,{"avatar-circle":!0,title:w(n).profile.nickname,avatar:w(n).profile.avatarUrl},null,8,["title","avatar"])])),_:1})])),_:1})):(a(),s(y,{key:1,url:"/pages/login/login"},{default:t((()=>[i(m,{type:"primary",size:"mini"},{default:t((()=>[_("去登录")])),_:1})])),_:1}))])),_:1},512)}}},[["__scopeId","data-v-d372bea2"]]),L=R({__name:"index",setup(e){d();const r=p([]),l=p([]),n=p(!1),o=[{id:-1,name:"每日推荐",iconUrl:"http://p1.music.126.net/4DpSgAVpJny4Ewf-Xw_WQQ==/109951163986641971.jpg",url:"/pages/recommend/recommend"},{id:-6,name:"私人FM",iconUrl:"http://p1.music.126.net/Shi7cRT1bDhwpVDM7AOFXg==/109951165265330616.jpg",url:"/pages/personalfm/personalfm"},{id:-2,name:"歌单",iconUrl:"http://p1.music.126.net/uG5p6CnwAHrLqOkaSeRlnA==/109951163986649164.jpg",url:""},{id:-3,name:"排行榜",iconUrl:"http://p1.music.126.net/SDFC6A3X2wzUCavYyeGIOg==/109951163986649670.jpg",url:"/pages/toplist/toplist"},{id:1025001,name:"有声书",iconUrl:"http://p1.music.126.net/Kb4oK0m_ocs3FR3lo-r9yg==/109951167319110429.jpg",url:""},{id:13e3,name:"数字专辑",iconUrl:"http://p1.music.126.net/nRWhsf3P7r7eqHz-v61VBg==/109951166989045593.jpg",url:""},{id:11e3,name:"直播",iconUrl:"http://p1.music.126.net/2JvVZZjcjyCE72fGMsC1hg==/109951166989043011.jpg",url:""},{id:1025e3,name:"关注新歌",iconUrl:"http://p1.music.126.net/BAOWsqZmmxL8JIH-wejMmQ==/109951167294312390.jpg",url:""},{id:1027e3,name:"收藏家",iconUrl:"http://p1.music.126.net/gk99UFRasebERf38t6A1kA==/109951168168319514.jpg",url:""}];y().then((e=>{r.value=e.banners})),b({limit:6}).then((e=>{l.value=e.playlists}));const c=()=>{D({url:"/pages/search/search"})};return(e,d)=>{const p=h(f("uni-icons"),T),m=h(f("uni-search-bar"),x),w=u,g=E,v=S,y=C,b=h(f("uni-section"),B),F=h(f("userDeawer"),z),M=h(f("playerBar"),I);return a(),s(M,null,{default:t((()=>[i(w,{class:"container"},{default:t((()=>[i(w,{class:"header"},{default:t((()=>[i(p,{class:"bars",color:"#5e6d82",type:"bars",size:"30",onClick:d[0]||(d[0]=e=>n.value=!0)}),i(w,{class:"search",onClick:c},{default:t((()=>[i(m,{placeholder:"搜索",bgColor:"#EEEEEE",readonly:""})])),_:1})])),_:1}),i(w,{class:"swiper-wrap"},{default:t((()=>[i(y,{class:"swiper","indicator-dots":"","indicator-color":"rgba(255, 255, 255, .4)","indicator-active-color":"#ffffff",autoplay:"",circular:""},{default:t((()=>[(a(!0),k(U,null,j(r.value,(e=>(a(),s(v,{key:e.targetId},{default:t((()=>[i(g,{src:e.imageUrl,mode:"widthFix"},null,8,["src"])])),_:2},1024)))),128))])),_:1})])),_:1}),i(y,{class:"icon-swiper","display-multiple-items":"5"},{default:t((()=>[(a(),k(U,null,j(o,(e=>i(v,{key:e.id},{default:t((()=>[i(g,{src:e.iconUrl,mode:"widthFix",onClick:a=>{var s;(s=e.url)&&D({url:s})}},null,8,["src","onClick"]),i(w,{class:"icon-name"},{default:t((()=>[_(A(e.name),1)])),_:2},1024)])),_:2},1024))),64))])),_:1}),i(b,{type:"line",title:"推荐歌单"},{default:t((()=>[i(w,{class:"playlist"},{default:t((()=>[(a(!0),k(U,null,j(l.value,(e=>(a(),s(w,{class:"playlist-item",key:e.id,onClick:a=>{return s=e.id,void D({url:`/pages/songlist/songlist?id=${s}`});var s}},{default:t((()=>[i(g,{src:e.coverImgUrl,mode:"widthFix"},null,8,["src"]),i(w,{class:"playlist-item-name"},{default:t((()=>[_(A(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1}),i(F,{visible:n.value,"onUpdate:visible":d[1]||(d[1]=e=>n.value=e)},null,8,["visible"])])),_:1})}}},[["__scopeId","data-v-491a290b"]]);export{L as default};
