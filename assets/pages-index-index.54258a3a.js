import{r as e,o as s,c as a,w as t,a as r,n as i,b as l,d as n,e as o,f as c,i as d,u,g as p,h as m,t as h,j as f,F as w,k as g,l as _,m as y,p as k,q as v,s as b,v as j,x as U,S as C,y as D,z as A}from"./index-42e6d0b3.js";import{_ as E}from"./uni-icons.a63c0f89.js";import{_ as S}from"./uni-search-bar.c553e236.js";import{_ as T}from"./uni-section.609c8fa8.js";import{_ as x}from"./_plugin-vue_export-helper.1b428a4d.js";import{P as F}from"./playerBar.bc99ca33.js";import"./playlistCard.78fd4e23.js";const M=x({name:"UniDrawer",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted(){const e={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(s=>{if(this.disable)return;const a=Object.keys(e).find((a=>{const t=s.key,r=e[a];return r===t||Array.isArray(r)&&r.includes(t)}));a&&setTimeout((()=>{this.$emit(a,{})}),0)}))},render:()=>{}}},emits:["change"],props:{mode:{type:String,default:""},mask:{type:Boolean,default:!0},maskClick:{type:Boolean,default:!0},width:{type:Number,default:220}},data:()=>({visibleSync:!1,showDrawer:!1,rightMode:!1,watchTimer:null,drawerWidth:220}),created(){this.drawerWidth=this.width,this.rightMode="right"===this.mode},methods:{clear(){},close(e){("mask"!==e||this.maskClick)&&this.visibleSync&&this._change("showDrawer","visibleSync",!1)},open(){this.visibleSync||this._change("visibleSync","showDrawer",!0)},_change(e,s,a){this[e]=a,this.watchTimer&&clearTimeout(this.watchTimer),this.watchTimer=setTimeout((()=>{this[s]=a,this.$emit("change",a)}),a?50:300)}}},[["render",function(u,p,m,h,f,w){const g=d,_=e("keypress");return f.visibleSync?(s(),a(g,{key:0,class:i([{"uni-drawer--visible":f.showDrawer},"uni-drawer"]),onTouchmove:o(w.clear,["stop","prevent"])},{default:t((()=>[r(g,{class:i(["uni-drawer__mask",{"uni-drawer__mask--visible":f.showDrawer&&m.mask}]),onClick:p[0]||(p[0]=e=>w.close("mask"))},null,8,["class"]),r(g,{class:i(["uni-drawer__content",{"uni-drawer--right":f.rightMode,"uni-drawer--left":!f.rightMode,"uni-drawer__content--visible":f.showDrawer}]),style:l({width:f.drawerWidth+"px"})},{default:t((()=>[n(u.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),r(_,{onEsc:p[1]||(p[1]=e=>w.close("mask"))})])),_:3},8,["class","onTouchmove"])):c("",!0)}],["__scopeId","data-v-99368944"]]),R=x({__name:"index",setup(e){const i=u(),l=p([]),n=p([]),o=[{id:-1,name:"每日推荐",iconUrl:"http://p1.music.126.net/4DpSgAVpJny4Ewf-Xw_WQQ==/109951163986641971.jpg",url:"/pages/recommend/recommend"},{id:-6,name:"私人FM",iconUrl:"http://p1.music.126.net/Shi7cRT1bDhwpVDM7AOFXg==/109951165265330616.jpg",url:"/pages/personalfm/personalfm"},{id:-2,name:"歌单",iconUrl:"http://p1.music.126.net/uG5p6CnwAHrLqOkaSeRlnA==/109951163986649164.jpg",url:""},{id:-3,name:"排行榜",iconUrl:"http://p1.music.126.net/SDFC6A3X2wzUCavYyeGIOg==/109951163986649670.jpg",url:"/pages/toplist/toplist"},{id:1025001,name:"有声书",iconUrl:"http://p1.music.126.net/Kb4oK0m_ocs3FR3lo-r9yg==/109951167319110429.jpg",url:""},{id:13e3,name:"数字专辑",iconUrl:"http://p1.music.126.net/nRWhsf3P7r7eqHz-v61VBg==/109951166989045593.jpg",url:""},{id:11e3,name:"直播",iconUrl:"http://p1.music.126.net/2JvVZZjcjyCE72fGMsC1hg==/109951166989043011.jpg",url:""},{id:1025e3,name:"关注新歌",iconUrl:"http://p1.music.126.net/BAOWsqZmmxL8JIH-wejMmQ==/109951167294312390.jpg",url:""},{id:1027e3,name:"收藏家",iconUrl:"http://p1.music.126.net/gk99UFRasebERf38t6A1kA==/109951168168319514.jpg",url:""}];m().then((e=>{l.value=e.banners})),h({limit:6}).then((e=>{n.value=e.playlists}));const c=()=>{v({url:"/pages/search/search"})},x=p(null);return(e,u)=>{const p=b(j("uni-icons"),E),m=b(j("uni-search-bar"),S),h=d,R=U,B=A,I=C,W=b(j("uni-section"),T),L=D,O=b(j("uni-drawer"),M);return s(),f(w,null,[r(h,{class:"container"},{default:t((()=>[r(h,{class:"header"},{default:t((()=>[r(p,{class:"bars",type:"bars",size:"24",onClick:u[0]||(u[0]=e=>x.value.open())}),r(h,{class:"search",onClick:c},{default:t((()=>[r(m,{placeholder:"搜索",bgColor:"#EEEEEE",readonly:""})])),_:1})])),_:1}),r(h,{class:"swiper-wrap"},{default:t((()=>[r(I,{class:"swiper","indicator-dots":"","indicator-color":"rgba(255, 255, 255, .4)","indicator-active-color":"#ffffff",autoplay:"",circular:""},{default:t((()=>[(s(!0),f(w,null,g(l.value,(e=>(s(),a(B,{key:e.targetId},{default:t((()=>[r(R,{src:e.imageUrl,mode:"widthFix"},null,8,["src"])])),_:2},1024)))),128))])),_:1})])),_:1}),r(I,{class:"icon-swiper","display-multiple-items":"5"},{default:t((()=>[(s(),f(w,null,g(o,(e=>r(B,{key:e.id},{default:t((()=>[r(R,{src:e.iconUrl,mode:"widthFix",onClick:s=>{var a;(a=e.url)&&v({url:a})}},null,8,["src","onClick"]),r(h,{class:"icon-name"},{default:t((()=>[y(k(e.name),1)])),_:2},1024)])),_:2},1024))),64))])),_:1}),r(W,{type:"line",title:"推荐歌单"},{default:t((()=>[r(h,{class:"playlist"},{default:t((()=>[(s(!0),f(w,null,g(n.value,(e=>(s(),a(h,{class:"playlist-item",key:e.id,onClick:s=>{return a=e.id,void v({url:`/pages/songlist/songlist?id=${a}`});var a}},{default:t((()=>[r(R,{src:e.coverImgUrl,mode:"widthFix"},null,8,["src"]),r(h,{class:"playlist-item-name"},{default:t((()=>[y(k(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),r(O,{ref_key:"userDrawer",ref:x,mode:"left",width:320},{default:t((()=>[_(i).profile?(s(),a(h,{key:0},{default:t((()=>[r(h,{class:""},{default:t((()=>[y(k(_(i).profile.nickname),1)])),_:1}),r(R,{src:_(i).profile.avatarUrl,mode:""},null,8,["src"]),y(" "+k(_(i).profile),1)])),_:1})):(s(),a(L,{key:1,url:"/pages/login/login"},{default:t((()=>[y("登录")])),_:1}))])),_:1},512)])),_:1}),r(F,{padding:!0})],64)}}},[["__scopeId","data-v-0c0e11b0"]]);export{R as default};
